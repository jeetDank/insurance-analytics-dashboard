<div class="mt-2">
  <p-accordion [value]="0">
    @for (tab of tabs; track tab.title) {
    <p-accordion-panel
      class="mt-3 shadow-sm rounded rounded-2 overflow-hidden"
      [value]="tab.value"
    >
      <p-accordion-header>
        <div class="w-100 d-flex gap-2 rounded rounded-2">
          <div class="text-success">
            <i [class]="tab.icon" style="font-size: 1.5rem"></i>
          </div>
          <div class="">
            {{ tab.title }}
          </div>
          <p-tag
            class="ms-auto me-3 fw-normal"
            icon="pi pi-sparkles"
            severity="secondary"
            value="Specialized Analysis"
          />
        </div>
      </p-accordion-header>

      <p-accordion-content>
        <div class="info-and-selector">
          <div class="mb-3">
            <i class="pi pi-info-circle text-primary me-2"></i>
            <span class="fw-medium">Transparency & Trust</span>:This specialized
            financial LLM provides full visibility into its analysis process,
            directly accessing SEC EDGAR filings, extracting structured
            financial data, and performing verified calculations with
            audit-ready formulas.
          </div>

          <div class="mb-2">
            <div class="mb-2">
              <label for="">Compare With:</label>
            </div>
            <p-selectbutton
              [options]="comparisonType"
              [(ngModel)]="selectedComparisonValue"
              optionLabel="label"
              optionValue="value"
            />
          </div>
        </div>

        <app-custom-message
          icon="pi pi-exclamation-circle"
          severity="error"
          title="Impact of using ChatGPT:"
          [body]="customMessage"
        ></app-custom-message>

        <div class="fs-6 mb-3">
          {{ tab.subTitle }}
        </div>

        <!-- Steps iteration -->
        <div class="steps-container">
          @for (step of tab.steps; track step.id) {
          <div class="step-item mb-4 p-3 border rounded">
            <!-- Step header -->
            <div class="d-flex align-items-center gap-2 mb-2">
              <div class="flex-grow-1">
                <div class="d-flex align-items-center gap-2 mb-1">
                  @if (step.icon) {
                  <i
                    [class]="step.icon"
                    class="text-success"
                    style="font-size: 1.25rem"
                  ></i>
                  }
                  <h6 class="mb-0">{{ step.title }}</h6>
                  @if (step.tag) {
                  <p-tag
                    [value]="step.tag"
                    [icon]="step.tagIcon || ''"
                    severity="contrast"
                    class="fw-medium"
                    [style]="{
                      'font-size': '0.75rem',
                      background: 'transparent',
                      color: 'black',
                      border: '1px solid gray'
                    }"
                  />
                  }
                </div>

                @if (step.subTitle) {
                <p class="text-muted mb-2 small">{{ step.subTitle }}</p>
                }
              </div>
            </div>

            <!-- Lists within step -->
            @if (step.list) {
            <div class="ms-4">
              @for (subList of step.list; track $index) {
              <div class="mb-3">
                @if (subList.listTitle) {
                <div class="d-flex align-items-center gap-2 mb-2">
                  @if (subList.listIcon) {
                  <i [class]="subList.listIcon" class="text-primary"></i>
                  }
                  <strong class="small">{{ subList.listTitle }}</strong>
                </div>
                } @if (subList.list) {
                <ul class="list-unstyled ms-3">
                  @for (item of subList.list; track $index) {
                  <li class="mb-2 d-flex align-items-start gap-2">
                    @if (item.itemIcon) {
                    <i
                      [class]="item.itemIcon"
                      class="mt-1 text-secondary"
                      style="font-size: 0.875rem"
                    ></i>
                    } @if (item.itemTitle) {
                    <span class="small">{{ item.itemTitle }}</span>
                    }
                  </li>
                  }
                </ul>
                }
              </div>
              }
            </div>
            
            }
            <div>
            @if (step.message) {
            <app-custom-message
              [icon]="step.message.icon"
              [severity]="step.message.severity"
              [title]="step.message.title"
              [body]="step.message.message"
            ></app-custom-message>
            }
          </div>
          </div>

          
          }
        </div>
      </p-accordion-content>
    </p-accordion-panel>
    }
  </p-accordion>
</div>
